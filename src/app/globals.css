@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* -------------------- Design tokens -------------------- */
:root{
  --background:#111111;
  --foreground:#ffffff;
  --border:#ffffff;
  --accent:#38bdf8;       /* sky-400 */
  --accent-hover:#7dd3fc; /* sky-300 */
  --nav-h:56px;           /* sticky header height */
}
@theme inline{
  --color-base:var(--background);
  --color-text:var(--foreground);
  --color-border:var(--border);
  --color-accent:var(--accent);
  --color-accent-hover:var(--accent-hover);
}

/* -------------------- Base -------------------- */
html,body{ background:var(--background); color:var(--foreground); }
html { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  * { animation: none !important; transition: none !important; }
}

/* Prose defaults on dark */
.prose{
  --tw-prose-body:var(--foreground);
  --tw-prose-headings:var(--foreground);
  --tw-prose-links:var(--accent);
  --tw-prose-bold:var(--foreground);
  --tw-prose-counters:#ccc;
  --tw-prose-bullets:#ccc;
  --tw-prose-hr:#444;
  --tw-prose-quotes:#ccc;
  --tw-prose-code:var(--accent);
  --tw-prose-pre-code:var(--foreground);
  --tw-prose-pre-bg:#1a1a1a;
}
:root { --nav-h: 56px; }               
.prose :is(h2,h3,h4){ scroll-margin-top: calc(var(--nav-h) + 20px); }

@layer base{
  .prose h2{ @apply mt-10 mb-3 text-2xl md:text-3xl font-semibold border-b border-border pb-2; }
  .prose h3{ @apply mt-8 mb-2 text-xl md:text-2xl font-semibold; }
}

@layer utilities {
  .cv-auto { content-visibility: auto; contain-intrinsic-size: 0 800px; }
}

/* -------------------- Components -------------------- */
@layer components{
  /* Buttons */
  .chip { @apply border border-border text-text bg-transparent; }
  .chip:hover,
  .chip:focus-visible { 
    @apply border-2 border-accent text-accent;
    background: transparent;    /* key: don't fill */
  }
  .chip-active { @apply border-2 border-accent text-accent; }
  .btn{
    @apply inline-flex items-center justify-center gap-2 rounded-lg
           px-3 py-1.5 text-sm font-medium
           outline-none transition-colors duration-150 select-none;
    text-decoration-thickness:2px;
    text-underline-offset:3px;
  }
  .btn:hover,
  .btn:focus-visible{ text-decoration:underline; }
  .btn:focus-visible{ @apply ring-2 ring-accent; }
  .btn:disabled{ @apply opacity-50 cursor-not-allowed; }

  /* Outline */
  .btn-outline{ @apply border border-border text-text bg-base; }
  .btn-outline:hover{ @apply border-accent bg-accent text-base; }

  /* Filled – Accent (a11y: dark text on light accent) */
  .btn-accent{ @apply bg-accent text-base border border-accent font-semibold; }
  .btn-accent:hover{ @apply bg-accent-hover border-accent-hover; }
  /* Belt & suspenders in case other classes force blue text */
  .btn-accent, .btn-accent:hover { color: var(--background) !important; }

  /* Filled – White */
  .btn-white{ @apply bg-white text-base border border-white; }
  .btn-white:hover{ @apply bg-zinc-200 border-zinc-200; }

  /* Inline links (use for text links, not buttons) */
  .link{ @apply underline underline-offset-2 decoration-2 transition; }
  .link:hover{ @apply text-accent decoration-4; }

  /* Simple gallery grid for case studies */
  .img-grid{ display:grid; grid-template-columns:1fr; gap:.75rem; }
  @media (min-width:640px){ .img-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
  @media (min-width:1024px){ .img-grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }
  .img-grid img{ @apply w-full h-auto rounded-lg border border-border; }
  .img-grid figure{ margin:0; }
  .img-grid figcaption{ @apply text-xs text-text/70 mt-1; }
   /* MDX subhead spacing */
  .prose .subhead {
    display: block;
    color: color-mix(in oklab, var(--color-text), transparent 30%);
    margin-top: 0.35rem;   /* default top gap */
    margin-bottom: 0.25rem;
  }

  /* If MDX wrapped it in a <p>, normalize that paragraph's margins */
  .prose p:has(> .subhead) {
    margin-top: 0.35rem;
    margin-bottom: 0.25rem;
  }

  /* Pull Subhead closer when it follows a heading */
  .prose h2 + .subhead,
  .prose h2 + p:has(> .subhead) { margin-top: -0.25rem; }

  .prose h3 + .subhead,
  .prose h3 + p:has(> .subhead) { margin-top: -0.2rem; }

  /* Ensure a little space when Subhead follows body elements */
  .prose p + .subhead,
  .prose p + p:has(> .subhead),
  .prose ul + .subhead,
  .prose ol + .subhead,
  .prose pre + .subhead,
  .prose blockquote + .subhead {
    margin-top: 0.4rem;
  }

  /* Keep lists tight after a Subhead */
  .prose .subhead + ul,
  .prose .subhead + ol,
  .prose p:has(> .subhead) + ul,
  .prose p:has(> .subhead) + ol {
    margin-top: 0.15rem;
  }
}